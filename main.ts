scene.setBackgroundImage(img`
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111
    11111111111111111dddd111111111111111111111111111111111111dddd111111111111111111111111111111111111dddd111111111111111111111111111111111111dddd1111111111111111111
    11111111111ddddddddddd11111111111111111111111111111ddddddddddd11111111111111111111111111111ddddddddddd11111111111111111111111111111ddddddddddd111111111111111111
    11111111dddddddddddddd11111111111111111111111111dddddddddddddd11111111111111111111111111dddddddddddddd11111111111111111111111111dddddddddddddd111111111111111111
    111111dddddddddddddddd111111111111111111111111dddddddddddddddd111111111111111111111111dddddddddddddddd111111111111111111111111dddddddddddddddd111111111111111111
    11111ddddddddddddddddd11111111111111111111111ddddddddddddddddd11111111111111111111111ddddddddddddddddd11111111111111111111111ddddddddddddddddd111111111111111111
    11111ddddddddddddddddd11111111111111111111111ddddddddddddddddd11111111111111111111111ddddddddddddddddd11111111111111111111111ddddddddddddddddd111111111111111111
    1111ddddddddddddddddddd111111111111111111111ddddddddddddddddddd111111111111111111111ddddddddddddddddddd111111111111111111111ddddddddddddddddddd11111111111111111
    1111ddddddddddddddddddd111111111111111111111ddddddddddddddddddd111111111111111111111ddddddddddddddddddd111111111111111111111ddddddddddddddddddd11111111111111111
    111dddddddddddddddddddd111111ddd11111111111dddddddddddddddddddd111111ddd11111111111dddddddddddddddddddd111111ddd11111111111dddddddddddddddddddd111111ddd11111111
    111dddddddddddddddddddd11111ddddd1111111111dddddddddddddddddddd11111ddddd1111111111dddddddddddddddddddd11111ddddd1111111111dddddddddddddddddddd11111ddddd1111111
    11ddddddddddddddddddddd11111ddddd111111111ddddddddddddddddddddd11111ddddd111111111ddddddddddddddddddddd11111ddddd111111111ddddddddddddddddddddd11111ddddd1111111
    11ddddddddddddddddddddd11111ddddd111111111ddddddddddddddddddddd11111ddddd111111111ddddddddddddddddddddd11111ddddd111111111ddddddddddddddddddddd11111ddddd1111111
    11ddddddddddddddddddddd11111dddddd11111111ddddddddddddddddddddd11111dddddd11111111ddddddddddddddddddddd11111dddddd11111111ddddddddddddddddddddd11111dddddd111111
    1dddddddddddddddddddddd11111dddddd1111111dddddddddddddddddddddd11111dddddd1111111dddddddddddddddddddddd11111dddddd1111111dddddddddddddddddddddd11111dddddd111111
    1dddddddddddddddddddddd11111dddddd1111111dddddddddddddddddddddd11111dddddd1111111dddddddddddddddddddddd11111dddddd1111111dddddddddddddddddddddd11111dddddd111111
    1dddddddddddddddddddddd1111ddddddd1111111dddddddddddddddddddddd1111ddddddd1111111dddddddddddddddddddddd1111ddddddd1111111dddddddddddddddddddddd1111ddddddd111111
    ddddddddddddddd6ddddddd1111ddddddd1111ddddddddddddddddd6ddddddd1111ddddddd1111ddddddddddddddddd6ddddddd1111ddddddd1111ddddddddddddddddd6ddddddd1111ddddddd1111dd
    dddddddddddddd66ddddddd1111ddddddd11dddddddddddddddddd66ddddddd1111ddddddd11dddddddddddddddddd66ddddddd1111ddddddd11dddddddddddddddddd66ddddddd1111ddddddd11dddd
    dddddddddddddd66ddddddd1111dddddddd1dddddddddddddddddd66ddddddd1111dddddddd1dddddddddddddddddd66ddddddd1111dddddddd1dddddddddddddddddd66ddddddd1111dddddddd1dddd
    ddddddddddddd6666dddddd1111dddddddddddddddddddddddddd6666dddddd1111dddddddddddddddddddddddddd6666dddddd1111dddddddddddddddddddddddddd6666dddddd1111ddddddddddddd
    ddddddddddd66666ddddddddddddddddddddddddddddddddddd66666ddddddddddddddddddddddddddddddddddd66666ddddddddddddddddddddddddddddddddddd66666dddddddddddddddddddddddd
    ddddddddddddd666ddddddddddddddd9999999ddddddddddddddd666ddddddddddddddd9999999ddddddddddddddd666ddddddddddddddd9999999ddddddddddddddd666ddddddddddddddd9999999dd
    dddddddddddd66666dddddddddddd99999999999dddddddddddd66666dddddddddddd99999999999dddddddddddd66666dddddddddddd99999999999dddddddddddd66666dddddddddddd99999999999
    9ddddddddddd6666666ddddddddd9999999999999ddddddddddd6666666ddddddddd9999999999999ddddddddddd6666666ddddddddd9999999999999ddddddddddd6666666ddddddddd999999999999
    999dddddddd666666ddddddddd99999999999999999dddddddd666666ddddddddd99999999999999999dddddddd666666ddddddddd99999999999999999dddddddd666666ddddddddd99999999999999
    9999ddddd666666666ddddddd9999999999999999999ddddd666666666ddddddd9999999999999999999ddddd666666666ddddddd9999999999999999999ddddd666666666ddddddd999999999999999
    99999dddddd66666666ddddd999999999999999999999dddddd66666666ddddd999999999999999999999dddddd66666666ddddd999999999999999999999dddddd66666666ddddd9999999999999999
    999999dd996666666dddddd99999999999999999999999dd996666666dddddd99999999999999999999999dd996666666dddddd99999999999999999999999dd996666666dddddd99999999999999999
    999999999999666666dddd996999999999999999999999999999666666dddd996999999999999999999999999999666666dddd996999999999999999999999999999666666dddd996999999999999999
    9999999999666666666dd99969999999999999999999999999666666666dd99969999999999999999999999999666666666dd99969999999999999999999999999666666666dd9996999999999999999
    9999999996666666666699966999999999999999999999999666666666669996699999999999999999999999966666666666999669999999999999999999999996666666666699966999999999999999
    9999999666666666669999996699999999999999999999966666666666999999669999999999999999999996666666666699999966999999999999999999999666666666669999996699999999999999
    9999999996666666669999966999999999999999999999999666666666999996699999999999999999999999966666666699999669999999999999999999999996666666669999966999999999999999
    9999999996666666999999666699999999999999999999999666666699999966669999999999999999999999966666669999996666999999999999999999999996666666999999666699999999999999
    9999999966966666666996666669999999999999999999996696666666699666666999999999999999999999669666666669966666699999999999999999999966966666666996666669999999999999
    9999999999666666666699966999999999996999999999999966666666669996699999999999699999999999996666666666999669999999999969999999999999666666666699966999999999996999
    9999999966666666666996666669999999996999999999996666666666699666666999999999699999999999666666666669966666699999999969999999999966666666666996666669999999996999
    9996999666666666666966666666999999966699999699966666666666696666666699999996669999969996666666666669666666669999999666999996999666666666666966666666999999966699
    9996699999666666666666666699999999996699999669999966666666666666669999999999669999966999996666666666666666999999999966999996699999666666666666666699999999996699
    9966999966666666666666666666999999966999996699996666666666666666666699999996699999669999666666666666666666669999999669999966999966666666666666666666999999966999
    9996699666666666666666666666699999666699999669966666666666666666666669999966669999966996666666666666666666666999996666999996699666666666666666666666699999666699
    9966666666666666666666666669999999966669996666666666666666666666666999999996666999666666666666666666666666699999999666699966666666666666666666666669999999966669
    9996666666666666666666666666699999666699999666666666666666666666666669999966669999966666666666666666666666666999996666999996666666666666666666666666699999666699
    9996666666666666666666666666669996666669999666666666666666666666666666999666666999966666666666666666666666666699966666699996666666666666666666666666669996666669
    9966666666666666666666666666999999666699996666666666666666666666666699999966669999666666666666666666666666669999996666999966666666666666666666666666999999666699
    9666666666666666666666666666669966666669966666666666666666666666666666996666666996666666666666666666666666666699666666699666666666666666666666666666669966666669
    9966666666666666666666666666666996666666996666666666666666666666666666699666666699666666666666666666666666666669966666669966666666666666666666666666666996666666
    9966666666666666666666666666669966666666996666666666666666666666666666996666666699666666666666666666666666666699666666669966666666666666666666666666669966666666
    6666666666666666666666666666666966666666666666666666666666666666666666696666666666666666666666666666666666666669666666666666666666666666666666666666666966666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
    6666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666
`)

// Define sprite kinds
let Footprint = SpriteKind.create()
let Heart = SpriteKind.create()
let Shield = SpriteKind.create()
let Magnet = SpriteKind.create()
let Text = SpriteKind.create() // For highscore display

// Create the fox sprite
let myfox = sprites.create(img`
    . . . . . 4 4 . . . . . 4 4 . .
    . . . . 4 4 4 . . . . 4 4 4 . .
    . . . . 4 1 4 4 . . 4 4 1 4 . .
    . . . 4 4 1 1 4 . . 4 1 1 4 . .
    . . . 4 4 4 4 4 4 4 4 4 4 4 . .
    . . . 4 4 1 f 4 4 4 1 f 4 4 4 .
    . . . 4 4 f f 4 4 4 f f 4 4 4 .
    . . . 4 4 4 4 4 2 4 4 4 4 4 4 .
    . . . . 4 f 4 2 2 4 4 4 f 4 . .
    . . . . . f 4 4 4 4 4 4 f 4 . .
    . . . . . f f f f f f f f . . .
    . . . . . . 4 4 4 4 4 . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
    . . . . . . . . . . . . . . . .
`, SpriteKind.Player)

// Define axe images (three variations with different colors)
let axe1Images = [
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . 9 9 . . . . . .
        . . . . . . . 9 8 9 9 . . . . .
        . . . . . . 9 8 8 9 9 . . . . .
        . . . . . 9 8 8 6 9 9 f f . . .
        . . . . . 8 8 8 6 9 8 9 f . . .
        . . . . . . 9 9 f 8 8 8 9 . . .
        . . . . . . . f f f 8 9 9 . . .
        . . . . . . f f f . 9 9 . . . .
        . . . . . f f f . . . . . . . .
        . . . . f f f . . . . . . . . .
        . . . f f f . . . . . . . . . .
        . . . f f . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . f f f f . . . . . . .
        . . . . f f f . f f . . . . . .
        . . . . f f . . f f . . . . . .
        . . . . f . . . . f f . . . . .
        . . . . f f . 8 8 8 f . . . . .
        . . . . f f 8 8 8 8 9 . . . . .
        . . . . f f 6 8 8 9 9 . . . . .
        . . . . f 9 6 8 8 9 . . . . . .
        . . . . . f 9 9 9 9 . . . . . .
        . . . . . . f 9 9 . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . 9 9 . . . . . .
        . . . . . . . 9 9 f . . . . . .
        . . . . . . 9 9 f f f . . . . .
        . . . . . 9 9 f f f . . . . . .
        . . . . . 8 8 8 f . . . . . . .
        . . . . 8 8 8 f 6 9 . . . . . .
        . . . . 9 8 8 8 6 8 f . . . . .
        . . . . 9 9 8 8 f f f . . . . .
        . . . . . 9 9 f f f . . . . . .
        . . . . . . 9 9 f . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . 9 9 f . . . . . . .
        . . . . . . 9 9 9 f . . . . . .
        . . . . . . 9 8 8 8 f . . . . .
        . . . . . f 8 6 8 8 8 . . . . .
        . . . . f 9 8 6 8 8 f . . . . .
        . . . . f f f 8 8 f . . . . . .
        . . . . . f f f 9 f . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `
];

let axe2Images = [
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . 5 5 . . . . . .
        . . . . . . . 5 4 5 5 . . . . .
        . . . . . . 5 4 4 5 5 . . . . .
        . . . . . 5 4 4 6 5 5 f f . . .
        . . . . . 4 4 4 6 5 4 5 f . . .
        . . . . . . 5 5 f 4 4 4 5 . . .
        . . . . . . . f f f 4 5 5 . . .
        . . . . . . f f f . 5 5 . . . .
        . . . . . f f f . . . . . . . .
        . . . . f f f . . . . . . . . .
        . . . f f f . . . . . . . . . .
        . . . f f . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . f f f f . . . . . . .
        . . . . f f f . f f . . . . . .
        . . . . f f . . f f . . . . . .
        . . . . f . . . . f f . . . . .
        . . . . f f . 4 4 4 f . . . . .
        . . . . f f 4 4 4 4 5 . . . . .
        . . . . f f 6 4 4 5 5 . . . . .
        . . . . f 5 6 4 4 5 . . . . . .
        . . . . . f 5 5 5 5 . . . . . .
        . . . . . . f 5 5 . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . 5 5 . . . . . .
        . . . . . . . 5 5 f . . . . . .
        . . . . . . 5 5 f f f . . . . .
        . . . . . 5 5 f f f . . . . . .
        . . . . . 4 4 4 f . . . . . . .
        . . . . 4 4 4 f 6 5 . . . . . .
        . . . . 5 4 4 4 6 4 f . . . . .
        . . . . 5 5 4 4 f f f . . . . .
        . . . . . 5 5 f f f . . . . . .
        . . . . . . 5 5 f . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . 5 5 f . . . . . . .
        . . . . . . 5 5 5 f . . . . . .
        . . . . . . 5 4 4 4 f . . . . .
        . . . . . f 4 6 4 4 4 . . . . .
        . . . . f 5 4 6 4 4 f . . . . .
        . . . . f f f 4 4 f . . . . . .
        . . . . . f f f 5 f . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `
];

let axe3Images = [
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . 2 2 . . . . . .
        . . . . . . . 2 8 2 2 . . . . .
        . . . . . . 2 8 8 2 2 . . . . .
        . . . . . 2 8 8 6 2 2 f f . . .
        . . . . . 8 8 8 6 2 8 2 f . . .
        . . . . . . 2 2 f 8 8 8 2 . . .
        . . . . . . . f f f 8 2 2 . . .
        . . . . . . f f f . 2 2 . . . .
        . . . . . f f f . . . . . . . .
        . . . . f f f . . . . . . . . .
        . . . f f f . . . . . . . . . .
        . . . f f . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . f f f f . . . . . . .
        . . . . f f f . f f . . . . . .
        . . . . f f . . f f . . . . . .
        . . . . f . . . . f f . . . . .
        . . . . f f . 8 8 8 f . . . . .
        . . . . f f 8 8 8 8 2 . . . . .
        . . . . f f 6 8 8 2 2 . . . . .
        . . . . f 2 6 8 8 2 . . . . . .
        . . . . . f 2 2 2 2 . . . . . .
        . . . . . . f 2 2 . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . 2 2 . . . . . .
        . . . . . . . 2 2 f . . . . . .
        . . . . . . 2 2 f f f . . . . .
        . . . . . 2 2 f f f . . . . . .
        . . . . . 8 8 8 f . . . . . . .
        . . . . 8 8 8 f 6 2 . . . . . .
        . . . . 2 8 8 8 6 8 f . . . . .
        . . . . 2 2 8 8 f f f . . . . .
        . . . . . 2 2 f f f . . . . . .
        . . . . . . 2 2 f . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `,
    img`
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . 2 2 f . . . . . . .
        . . . . . . 2 2 2 f . . . . . .
        . . . . . . 2 8 8 8 f . . . . .
        . . . . . f 8 6 8 8 8 . . . . .
        . . . . f 2 8 6 8 8 f . . . . .
        . . . . f f f 8 8 f . . . . . .
        . . . . . f f f 2 f . . . . . .
        . . . . . . f f f f . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
        . . . . . . . . . . . . . . . .
    `
];

// Array to store all axes and their image sets
let axes: Sprite[] = []
let axeImageSets: Image[][] = [axe1Images, axe2Images, axe3Images]

// Initialize score, highscore, and game state
let score = 0
let highscore = info.highScore() || 0
let gameOver = false
let lastFootprintTime = 0
let shieldActive = false
let shieldEndTime = 0
let magnetActive = false
let magnetEndTime = 0
let shieldBubble: Sprite = null
let highscoreDisplay: Sprite = null

// Set up fox movement and lives
controller.moveSprite(myfox, 100, 100)
myfox.setStayInScreen(true)
info.setLife(3) // Start with 3 lives

// Create initial three axes
let axe1 = sprites.create(axe1Images[0], SpriteKind.Projectile)
axe1.setPosition(20, 20) // Top-left
axe1.vx = -50 // Move left-up
axe1.vy = -50
axes.push(axe1)

let axe2 = sprites.create(axe2Images[0], SpriteKind.Projectile)
axe2.setPosition(140, 20) // Top-right
axe2.vx = 50 // Move right-up
axe2.vy = -50
axes.push(axe2)

let axe3 = sprites.create(axe3Images[0], SpriteKind.Projectile)
axe3.setPosition(80, 100) // Bottom-center
axe3.vx = 0 // Move down
axe3.vy = 50
axes.push(axe3)

// Set initial axe properties
for (let axe of axes) {
    axe.setBounceOnWall(true)
    axe.setStayInScreen(true)
}

// Make axes spin by cycling through images
let rotationIndex = 0
game.onUpdateInterval(100, function () {
    if (!gameOver) {
        rotationIndex = (rotationIndex + 1) % 4
        for (let i = 0; i < axes.length; i++) {
            let imageSet = axeImageSets[i % axeImageSets.length]
            axes[i].setImage(imageSet[rotationIndex])
        }
    }
})

// Footprint animation for fox movement
game.onUpdate(function () {
    if (!gameOver && (controller.dx() != 0 || controller.dy() != 0)) {
        let currentTime = game.runtime()
        if (currentTime - lastFootprintTime > 200) {
            let footprint = sprites.create(img`
                . . . . .
                . 7 7 . .
                . 7 7 . .
                . . 7 . .
                . . . . .
            `, Footprint)
            footprint.setPosition(myfox.x, myfox.y + 8) // Slightly below fox
            footprint.lifespan = 500 // Fade out after 500ms
            lastFootprintTime = currentTime
        }
    }
    // Update shield and magnet durations
    if (shieldActive && game.runtime() > shieldEndTime) {
        shieldActive = false
        if (shieldBubble) {
            shieldBubble.destroy()
            shieldBubble = null
        }
    }
    if (magnetActive && game.runtime() > magnetEndTime) {
        magnetActive = false
    }
    // Update shield bubble position and rainbow effect
    if (shieldActive && shieldBubble) {
        shieldBubble.setPosition(myfox.x, myfox.y)
        let colors = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
        let colorIndex = Math.floor(game.runtime() / 200) % colors.length
        shieldBubble.image.fill(colors[colorIndex])
    }
})

// Handle magnet activation with 'A' button
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (magnetActive && !gameOver) {
        for (let axe of axes) {
            let dx = myfox.x - axe.x
            let dy = myfox.y - axe.y
            let distance = Math.sqrt(dx * dx + dy * dy)
            if (distance > 0) {
                let speed = 200 // Magnet pull speed
                axe.vx += (dx / distance) * speed
                axe.vy += (dy / distance) * speed
            }
        }
        magnetEndTime = game.runtime() + 2000 // Magnet effect lasts 2 seconds
        music.playTone(880, 100) // Play a sound when magnet is activated
    }
})

// Spawn powerups (heart, shield, or magnet) every 10 seconds
game.onUpdateInterval(10000, function () {
    if (!gameOver) {
        let powerupType = Math.randomRange(0, 2)
        let powerupImage: Image
        let powerupKind: number
        if (powerupType === 0) {
            powerupImage = img`
                . . . . .
                . 5 . 5 .
                5 5 5 5 5
                5 5 5 5 5
                . 5 5 5 .
                . . 5 . .
                . . . . .
            `
            powerupKind = Heart
        } else if (powerupType === 1) {
            powerupImage = img`
                . . . . .
                . 3 3 3 .
                3 3 1 3 3
                3 1 1 1 3
                3 3 1 3 3
                . 3 3 3 .
                . . . . .
            `
            powerupKind = Shield
        } else {
            powerupImage = img`
                . . . . .
                . 9 9 9 .
                9 9 1 9 9
                9 1 1 1 9
                9 9 1 9 9
                . 9 9 9 .
                . . . . .
            `
            powerupKind = Magnet
        }
        let powerup = sprites.create(powerupImage, powerupKind)
        powerup.setPosition(Math.randomRange(10, 150), Math.randomRange(10, 110))
        powerup.lifespan = 5000 // Disappear after 5 seconds if not collected
    }
})

// Collect heart powerup
sprites.onOverlap(SpriteKind.Player, Heart, function (fox: Sprite, heart: Sprite) {
    heart.destroy()
    info.changeLifeBy(1)
    music.playTone(523, 100) // Play a sound when collecting a heart
})

// Collect shield powerup
sprites.onOverlap(SpriteKind.Player, Shield, function (fox: Sprite, shield: Sprite) {
    shield.destroy()
    shieldActive = true
    shieldEndTime = game.runtime() + 5000 // Shield lasts 5 seconds
    if (!shieldBubble) {
        shieldBubble = sprites.create(img`
            . . . . . . . . . . . . . . . .
            . . . . . . 1 1 1 1 . . . . . .
            . . . . . 1 1 . . 1 1 . . . . .
            . . . . 1 1 . . . . 1 1 . . . .
            . . . 1 1 . . . . . . 1 1 . . .
            . . 1 1 . . . . . . . . 1 1 . .
            . . 1 . . . . . . . . . . 1 . .
            . 1 1 . . . . . . . . . . 1 1 .
            . 1 1 . . . . . . . . . . 1 1 .
            . . 1 . . . . . . . . . . 1 . .
            . . 1 1 . . . . . . . . 1 1 . .
            . . . 1 1 . . . . . . 1 1 . . .
            . . . . 1 1 . . . . 1 1 . . . .
            . . . . . 1 1 . . 1 1 . . . . .
            . . . . . . 1 1 1 1 . . . . . .
            . . . . . . . . . . . . . . . .
        `, SpriteKind.Player)
        shieldBubble.setFlag(SpriteFlag.Ghost, true)
        shieldBubble.z = myfox.z - 1 // Behind fox
    }
    music.playTone(659, 100) // Play a sound when collecting a shield
})

// Collect magnet powerup
sprites.onOverlap(SpriteKind.Player, Magnet, function (fox: Sprite, magnet: Sprite) {
    magnet.destroy()
    magnetActive = true
    magnetEndTime = game.runtime() + 5000 // Magnet ability lasts 5 seconds
    music.playTone(784, 100) // Play a sound when collecting a magnet
})

// Scoreboard and axe/speed updates
info.setScore(score)
game.onUpdateInterval(1000, function () {
    if (!gameOver) {
        score += 1
        info.setScore(score)

        // Every 5 score, add axe or increase speed
        if (score % 5 === 0) {
            if (score % 10 === 0) {
                // Increase speed of all axes
                for (let axe of axes) {
                    axe.vx *= 1.2
                    axe.vy *= 1.2
                }
            } else {
                // Add new axe at random position
                let imageSet = axeImageSets[Math.randomRange(0, 2)]
                let newAxe = sprites.create(imageSet[0], SpriteKind.Projectile)
                newAxe.setPosition(Math.randomRange(10, 150), Math.randomRange(10, 110))
                newAxe.vx = Math.randomRange(-50, 50)
                newAxe.vy = Math.randomRange(-50, 50)
                newAxe.setBounceOnWall(true)
                newAxe.setStayInScreen(true)
                axes.push(newAxe)
            }
        }
    }
})

// Collision detection: any axe hits fox
sprites.onOverlap(SpriteKind.Projectile, SpriteKind.Player, function (axe: Sprite, fox: Sprite) {
    if (!shieldActive && !gameOver) {
        info.changeLifeBy(-1)
        // Add visual and sound feedback when hit
        myfox.startEffect(effects.blizzard, 200)
        music.playTone(261, 100) // Play a low tone when hit
        if (info.life() === 0) {
            // Show game over screen with score and highscore
            game.splash("Game Over! SCORE: " + score, "HIGHSCORE: " + info.highScore())
            game.gameOver(false)
            gameOver = true
        }
    }
})